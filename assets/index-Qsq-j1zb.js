(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();class L{constructor(t,n,s,r){this.id=crypto.randomUUID(),this.title=t,this.description=n,this.dueDate=s,this.priority=r,this.completed=!1}toggleComplete(){this.completed=!this.completed}getInfo(){console.log(JSON.stringify(this,null,2))}}class k{constructor(t,n=!1){this.id=crypto.randomUUID(),this.name=t,this.tasks=[],this.isDefault=n}addTask(t){t instanceof L?this.tasks.push(t):console.warn("You tried to add something that isn't a Task instance")}removeTask(t){this.tasks=this.tasks.filter(n=>n.id!==t)}}function f(e){if(!Array.isArray(e)){console.warn("You tried to add something that isn't an Array instance");return}let t=JSON.stringify(e);localStorage.setItem("projects",t)}function W(){const e=new k("Inbox",!0);e.id="Inbox";const t=new k("Today",!0);t.id="Today";const n=new k("ThisWeek",!0);n.id="ThisWeek",f([e,t,n])}function I(){let e=JSON.parse(localStorage.getItem("projects"))??[];const t=new Set;return e.map(s=>{const r=new k(s.name,s.isDefault??!1);return s.id&&!t.has(s.id)?(r.id=s.id,t.add(s.id)):r.id||(r.id=crypto.randomUUID(),t.add(r.id)),r.tasks=s.tasks.map(i=>{const a=new L(i.title,i.description,i.dueDate,i.priority,i.id);return a.completed=i.completed,a}),r})}const F=e=>({low:"priority-low",medium:"priority-med",high:"priority-high"})[e]??"";function H(e){e.forEach(t=>t.classList.remove("active-project"))}const P=6e4,O=36e5,j=Symbol.for("constructDateFrom");function p(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&j in e?e[j](t):e instanceof Date?new e.constructor(t):new Date(t)}function b(e,t){return p(t||e,e)}function A(e,t){const n=t==null?void 0:t.weekStartsOn,s=b(e,t==null?void 0:t.in),r=s.getDay(),i=(r<n?7:0)+r-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function C(e,...t){const n=p.bind(null,e||t.find(s=>typeof s=="object"));return t.map(n)}function x(e,t){const n=b(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function U(e){return p(e,Date.now())}function Y(e,t,n){const[s,r]=C(n==null?void 0:n.in,e,t);return+x(s)==+x(r)}function z(e,t,n){const[s,r]=C(n==null?void 0:n.in,e,t);return+A(s,n)==+A(r,n)}function B(e,t){return z(p((t==null?void 0:t.in)||e,e),U((t==null?void 0:t.in)||e),t)}function _(e,t){return Y(p(e,e),U(e))}function D(e,t){const n=()=>p(t==null?void 0:t.in,NaN),r=J(e);let i;if(r.date){const c=K(r.date,2);i=G(c.restDateString,c.year)}if(!i||isNaN(+i))return n();const a=+i;let o=0,d;if(r.time&&(o=Q(r.time),isNaN(o)))return n();if(r.timezone){if(d=V(r.timezone),isNaN(d))return n()}else{const c=new Date(a+o),y=b(0,t==null?void 0:t.in);return y.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),y.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),y}return b(a+o+d,t==null?void 0:t.in)}const T={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},R=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Z=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,X=/^([+-])(\d{2})(?::?(\d{2}))?$/;function J(e){const t={},n=e.split(T.dateTimeDelimiter);let s;if(n.length>2)return t;if(/:/.test(n[0])?s=n[0]:(t.date=n[0],s=n[1],T.timeZoneDelimiter.test(t.date)&&(t.date=e.split(T.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const r=T.timezone.exec(s);r?(t.time=s.replace(r[1],""),t.timezone=r[1]):t.time=s}return t}function K(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?r:i*100,restDateString:e.slice((s[1]||s[2]).length)}}function G(e,t){if(t===null)return new Date(NaN);const n=e.match(R);if(!n)return new Date(NaN);const s=!!n[4],r=h(n[1]),i=h(n[2])-1,a=h(n[3]),o=h(n[4]),d=h(n[5])-1;if(s)return st(t,o,d)?tt(t,o,d):new Date(NaN);{const c=new Date(0);return!nt(t,i,a)||!rt(t,r)?new Date(NaN):(c.setUTCFullYear(t,i,Math.max(r,a)),c)}}function h(e){return e?parseInt(e):1}function Q(e){const t=e.match(Z);if(!t)return NaN;const n=v(t[1]),s=v(t[2]),r=v(t[3]);return it(n,s,r)?n*O+s*P+r*1e3:NaN}function v(e){return e&&parseFloat(e.replace(",","."))||0}function V(e){if(e==="Z")return 0;const t=e.match(X);if(!t)return 0;const n=t[1]==="+"?-1:1,s=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return at(s,r)?n*(s*O+r*P):NaN}function tt(e,t,n){const s=new Date(0);s.setUTCFullYear(e,0,4);const r=s.getUTCDay()||7,i=(t-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+i),s}const et=[31,null,31,30,31,30,31,31,30,31,30,31];function $(e){return e%400===0||e%4===0&&e%100!==0}function nt(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(et[t]||($(e)?29:28))}function rt(e,t){return t>=1&&t<=($(e)?366:365)}function st(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function it(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function at(e,t){return t>=0&&t<=59}function q(e,t,n){t.innerHTML="",e.filter(s=>!s.isDefault).forEach(s=>{const r=`<button class="project-btn" data-id=${s.id}>${s.name} </button>`,i=`<button class="delete-project btn-close" data-id="${s.id}" >X</button>`,a=`<div class='flex flex-grow-1'> ${r} ${i} </div>`;t.insertAdjacentHTML("beforeend",a)}),n()}function g(e,t,n){if(n.innerHTML="",!e.find(a=>a.id===t))return;let r=[];const i=e.find(a=>a.id==="Inbox");if(t==="Today"&&i)r=i.tasks.filter(a=>_(D(a.dueDate)));else if(t==="ThisWeek"&&i)r=i.tasks.filter(a=>B(D(a.dueDate),{weekStartsOn:1}));else{const a=e.find(o=>o.id===t);if(!a)return;r=a.tasks.slice().sort((o,d)=>D(o.dueDate)-D(d.dueDate))}if(r.length===0){n.innerHTML='<p class="no-tasks">Brak taskÃ³w do wyÅ›wietlenia</p>';return}r.forEach(a=>{const o=F(a.priority),d=a.completed?"completed":"",c=`
      <div class="task-item ${o} ${d}" data-id="${a.id}">
        <div class="task-content">
          <h4 class="task-title">${a.title}</h4>
          <p class="task-desc">${a.description}</p>
        </div>
        <small class="task-date">${a.dueDate}</small>
        <div class="task-actions">
          <button class="toggle-task">âœ”</button>
          <button class="delete-task">ðŸ—‘</button>
        </div>
      </div>
    `;n.insertAdjacentHTML("beforeend",c)})}function E(e,t,n,s){const r=Array.from(document.querySelectorAll(".default-projects button")),i=Array.from(document.querySelectorAll(".project-btn")),a=[...r,...i];a.forEach(o=>{o.addEventListener("click",function(){H(a),this.classList.add("active-project");const d=this.dataset.id||this.id;n(d),s(e,d,t)})})}function ot(e,t){const s=`<div class="task-form">
      <input type="text" id="taskTitle" placeholder="Task title" required />
      <input type="text" id="taskDesc" placeholder="Description" />
      <input type="date" id="taskDate" value="${new Date().toISOString().split("T")[0]}" />
      <select id="taskPriority">
        <option value="low" selected>Low</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
      </select>
      <button id="confirmAddTask">Add Task</button>
    </div>`;e.insertAdjacentHTML("afterbegin",s),document.querySelector("#confirmAddTask").addEventListener("click",()=>{const i={title:document.querySelector("#taskTitle").value.trim(),description:document.querySelector("#taskDesc").value.trim(),dueDate:document.querySelector("#taskDate").value,priority:document.querySelector("#taskPriority").value};i.title&&t(i)})}function ct(e,t,n,s){const{title:r,description:i,dueDate:a,priority:o}=s;if(!(r!=null&&r.trim())){alert("Please enter task title.");return}const d=e.find(y=>y.id===t);if(!d)return console.warn("Activate project not found");const c=new L(r.trim(),i,a,o);d.tasks.push(c),f(e),g(e,t,n)}function dt(e,t,n,s){const r=e.find(i=>i.id===t);r&&(r.tasks=r.tasks.filter(i=>i.id!==n),f(e),g(e,t,s))}function ut(e,t,n,s){const r=t==="Today"||t==="ThisWeek"?"Inbox":t,i=e.find(o=>o.id===r);if(!i)return;const a=i.tasks.find(o=>o.id===n);a&&(a.completed=!a.completed,f(e),g(e,t,s))}const lt=document.querySelector("#addProject"),w=document.querySelector(".projects"),l=document.querySelector(".tasks"),ft=Array.from(document.querySelectorAll(".default-projects button")),S=document.querySelector(".btn-task");let u=I(),m="Inbox";function N(e){m=e,mt(m),g(u,e,l)}function M(){q(u,w,()=>E(u,l,N,g))}function mt(e){e==="Today"||e==="ThisWeek"?S.classList.add("hidden"):S.classList.remove("hidden")}function pt(){localStorage.getItem("projects")||(W(),u=I()),M(),N(m),yt()}function yt(){lt.addEventListener("click",()=>{document.querySelector(".new-project-wrapper")||w.insertAdjacentHTML("beforeend",`<div class='flex new-project-wrapper'> <input type="text" class="new-project-input" placeholder="project name"> <button class="confirm-add">Add</button> <button class="close-input">X</button> </div>`)}),w.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("confirm-add")){const s=document.querySelector(".new-project-input").value.trim();if(s){const r=new k(s);u.push(r),f(u),document.querySelector(".new-project-wrapper").remove(),M()}}t.classList.contains("close-input")&&document.querySelector(".new-project-wrapper").remove(),t.classList.contains("delete-project")&&(u=u.filter(n=>n.id!==t.dataset.id),f(u),q(u,w,()=>{E(u,ft,l,N)}))}),S.addEventListener("click",()=>{document.querySelector(".task-form")||ot(l,t=>{ct(u,m,l,t),f(u)})}),l.addEventListener("click",e=>{const t=e.target.closest(".task-item");if(!t)return;const n=t.dataset.id;e.target.classList.contains("delete-task")&&dt(u,m,n,l),e.target.classList.contains("toggle-task")&&ut(u,m,n,l)})}pt();
